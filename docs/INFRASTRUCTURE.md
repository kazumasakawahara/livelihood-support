# インフラストラクチャ構成ガイド

市の保護課全体での運用を想定したサーバー構成と設計指針を説明します。

## 目次

1. [構成概要](#構成概要)
2. [構成パターン](#構成パターン)
3. [サーバースペック](#サーバースペック)
4. [ネットワーク設計](#ネットワーク設計)
5. [セキュリティ設計](#セキュリティ設計)
6. [可用性設計](#可用性設計)
7. [バックアップ設計](#バックアップ設計)
8. [監視設計](#監視設計)
9. [コスト試算](#コスト試算)
10. [導入ロードマップ](#導入ロードマップ)

---

## 構成概要

### システム構成図

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          庁内ネットワーク（LGWAN系）                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐                      │
│   │ 職員PC  │  │ 職員PC  │  │ 職員PC  │  │ 職員PC  │  ...                 │
│   │(ブラウザ)│  │(ブラウザ)│  │(ブラウザ)│  │(ブラウザ)│                      │
│   └────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘                      │
│        │            │            │            │                            │
│        └────────────┴─────┬──────┴────────────┘                            │
│                           │                                                │
│                           ▼                                                │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                    リバースプロキシ / ロードバランサー                  │  │
│   │                         (nginx + WAF機能)                            │  │
│   │                                                                     │  │
│   │   ┌─────────────┐                        ┌─────────────┐            │  │
│   │   │  HTTPS:443  │ ←── SSL/TLS終端 ────→ │  HTTP内部   │            │  │
│   │   │  (外部公開)  │                        │  (内部通信)  │            │  │
│   │   └─────────────┘                        └─────────────┘            │  │
│   └────────────────────────────┬────────────────────────────────────────┘  │
│                                │                                           │
│            ┌───────────────────┼───────────────────┐                      │
│            │                   │                   │                      │
│            ▼                   ▼                   ▼                      │
│   ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐            │
│   │   APサーバー1   │ │   APサーバー2   │ │  認証サーバー   │            │
│   │                 │ │                 │ │                 │            │
│   │ ┌─────────────┐ │ │ ┌─────────────┐ │ │ ┌─────────────┐ │            │
│   │ │  Streamlit  │ │ │ │   FastAPI   │ │ │ │  Keycloak   │ │            │
│   │ │  (UI)       │ │ │ │   (API)     │ │ │ │  (認証)     │ │            │
│   │ └─────────────┘ │ │ └─────────────┘ │ │ └─────────────┘ │            │
│   │                 │ │                 │ │ ┌─────────────┐ │            │
│   │                 │ │                 │ │ │ PostgreSQL  │ │            │
│   │                 │ │                 │ │ │ (認証DB)    │ │            │
│   │                 │ │                 │ │ └─────────────┘ │            │
│   └────────┬────────┘ └────────┬────────┘ └─────────────────┘            │
│            │                   │                                          │
│            └─────────┬─────────┘                                          │
│                      │                                                    │
│                      ▼                                                    │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                       DBサーバー（プライマリ）                         │  │
│   │                                                                     │  │
│   │   ┌─────────────────────────────────────────────────────────────┐   │  │
│   │   │                    Neo4j Enterprise                         │   │  │
│   │   │                                                             │   │  │
│   │   │   ┌───────────────┐  ┌───────────────┐  ┌───────────────┐  │   │  │
│   │   │   │ グラフDB本体  │  │  暗号化有効   │  │  監査ログ     │  │   │  │
│   │   │   │ (受給者データ) │  │ (保存時暗号化) │  │ (全操作記録)  │  │   │  │
│   │   │   └───────────────┘  └───────────────┘  └───────────────┘  │   │  │
│   │   └─────────────────────────────────────────────────────────────┘   │  │
│   └────────────────────────────┬────────────────────────────────────────┘  │
│                                │                                           │
│                                │ レプリケーション（同期）                    │
│                                ▼                                           │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                       DBサーバー（レプリカ）                          │  │
│   │                                                                     │  │
│   │   ┌─────────────────────────────────────────────────────────────┐   │  │
│   │   │                    Neo4j Enterprise                         │   │  │
│   │   │                    (読み取り専用)                            │   │  │
│   │   └─────────────────────────────────────────────────────────────┘   │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                         監視・運用基盤                               │  │
│   │                                                                     │  │
│   │   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐               │  │
│   │   │ Prometheus  │  │   Grafana   │  │ Alertmanager│               │  │
│   │   │ (メトリクス) │  │ (ダッシュボード)│  │ (アラート)  │               │  │
│   │   └─────────────┘  └─────────────┘  └─────────────┘               │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                        バックアップサーバー                           │  │
│   │                                                                     │  │
│   │   ┌─────────────────────────────────────────────────────────────┐   │  │
│   │   │  日次バックアップ  │  世代管理（30世代）│  オフサイト転送     │   │  │
│   │   └─────────────────────────────────────────────────────────────┘   │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### コンポーネント一覧

| コンポーネント | 役割 | 技術スタック |
|--------------|------|-------------|
| リバースプロキシ | SSL終端、負荷分散、WAF | nginx 1.25 |
| Streamlit | ケースワーカー向けUI | Python 3.11 + Streamlit |
| FastAPI | REST API | Python 3.11 + FastAPI |
| Keycloak | 認証・認可 | Keycloak 23.x |
| Neo4j | グラフデータベース | Neo4j Enterprise 5.x |
| PostgreSQL | Keycloak用DB | PostgreSQL 16 |
| Prometheus | メトリクス収集 | Prometheus 2.x |
| Grafana | 監視ダッシュボード | Grafana 10.x |
| Alertmanager | アラート通知 | Alertmanager 0.26 |

---

## 構成パターン

### パターンA: 本番推奨構成（中規模自治体向け）

**対象規模**: ケースワーカー30名、受給者3,000世帯

```
サーバー台数: 7台
冗長性: あり（DB、AP）
可用性: 99.9%（年間ダウンタイム8.7時間以内）
```

| サーバー | 役割 | 台数 |
|---------|------|------|
| APサーバー | Streamlit + FastAPI | 2台（冗長） |
| DBサーバー | Neo4j Enterprise | 2台（Primary + Replica） |
| 認証サーバー | Keycloak + PostgreSQL | 1台 |
| 監視サーバー | Prometheus + Grafana | 1台 |
| バックアップ | バックアップ保管 | 1台 |

### パターンB: 小規模構成（パイロット・小規模自治体向け）

**対象規模**: ケースワーカー10名、受給者1,000世帯

```
サーバー台数: 2台
冗長性: 限定的
可用性: 99%（年間ダウンタイム87時間以内）
```

| サーバー | 役割 | 台数 |
|---------|------|------|
| 統合サーバー | 全アプリケーション | 1台 |
| バックアップ | バックアップ専用 | 1台 |

### パターンC: 最小構成（検証・デモ用）

**対象規模**: 検証目的、デモ環境

```
サーバー台数: 1台
冗長性: なし
可用性: ベストエフォート
```

---

## サーバースペック

### パターンA: 本番推奨構成

#### APサーバー（2台）

| 項目 | スペック |
|------|---------|
| CPU | Intel Xeon 4コア以上 / AMD EPYC 4コア以上 |
| メモリ | 16GB DDR4 ECC |
| ストレージ | 100GB SSD（RAID 1） |
| ネットワーク | 1Gbps x 2（チーミング） |
| OS | Ubuntu 22.04 LTS / RHEL 9 |

#### DBサーバー Primary（1台）

| 項目 | スペック |
|------|---------|
| CPU | Intel Xeon 8コア以上 / AMD EPYC 8コア以上 |
| メモリ | 32GB DDR4 ECC（Neo4j推奨） |
| ストレージ | 500GB NVMe SSD（RAID 1） |
| ネットワーク | 1Gbps x 2（チーミング） |
| OS | Ubuntu 22.04 LTS / RHEL 9 |

**Neo4j メモリ設定**:
```properties
# neo4j.conf
server.memory.pagecache.size=12G
server.memory.heap.initial_size=8G
server.memory.heap.max_size=8G
```

#### DBサーバー Replica（1台）

| 項目 | スペック |
|------|---------|
| CPU | Intel Xeon 8コア以上 |
| メモリ | 32GB DDR4 ECC |
| ストレージ | 500GB NVMe SSD（RAID 1） |
| ネットワーク | 1Gbps x 2 |
| OS | Ubuntu 22.04 LTS / RHEL 9 |

#### 認証サーバー（1台）

| 項目 | スペック |
|------|---------|
| CPU | Intel Xeon 4コア以上 |
| メモリ | 8GB DDR4 ECC |
| ストレージ | 100GB SSD（RAID 1） |
| ネットワーク | 1Gbps |
| OS | Ubuntu 22.04 LTS / RHEL 9 |

#### 監視サーバー（1台）

| 項目 | スペック |
|------|---------|
| CPU | 2コア以上 |
| メモリ | 8GB |
| ストレージ | 200GB SSD |
| ネットワーク | 1Gbps |
| OS | Ubuntu 22.04 LTS |

#### バックアップサーバー（1台）

| 項目 | スペック |
|------|---------|
| CPU | 2コア以上 |
| メモリ | 4GB |
| ストレージ | 2TB HDD（RAID 5） |
| ネットワーク | 1Gbps |
| OS | Ubuntu 22.04 LTS |

### パターンB: 小規模構成

#### 統合サーバー（1台）

| 項目 | スペック |
|------|---------|
| CPU | Intel Xeon 8コア / AMD EPYC 8コア |
| メモリ | 32GB DDR4 ECC |
| ストレージ | 500GB NVMe SSD（RAID 1） |
| ネットワーク | 1Gbps x 2 |
| OS | Ubuntu 22.04 LTS |

---

## ネットワーク設計

### ネットワークセグメント

```
┌─────────────────────────────────────────────────────────────────┐
│                     庁内LAN (10.0.0.0/8)                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │         業務セグメント (10.1.0.0/16)                     │   │
│   │                                                         │   │
│   │   職員PC: 10.1.x.x                                      │   │
│   └─────────────────────────────────────────────────────────┘   │
│                           │                                     │
│                           │ ファイアウォール                     │
│                           ▼                                     │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │         サーバーセグメント (10.2.0.0/24)                  │   │
│   │                                                         │   │
│   │   リバースプロキシ: 10.2.0.10                            │   │
│   │   APサーバー1:     10.2.0.21                            │   │
│   │   APサーバー2:     10.2.0.22                            │   │
│   │   DBサーバーP:     10.2.0.31                            │   │
│   │   DBサーバーR:     10.2.0.32                            │   │
│   │   認証サーバー:    10.2.0.40                            │   │
│   │   監視サーバー:    10.2.0.50                            │   │
│   │   バックアップ:    10.2.0.60                            │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### ファイアウォールルール

#### 業務セグメント → サーバーセグメント

| 送信元 | 宛先 | ポート | プロトコル | 説明 |
|-------|------|--------|-----------|------|
| 10.1.0.0/16 | 10.2.0.10 | 443 | HTTPS | Webアクセス |
| 10.1.0.0/16 | 10.2.0.10 | 80 | HTTP | リダイレクト用 |

#### サーバー間通信

| 送信元 | 宛先 | ポート | プロトコル | 説明 |
|-------|------|--------|-----------|------|
| 10.2.0.10 | 10.2.0.21-22 | 8501 | HTTP | Streamlit |
| 10.2.0.10 | 10.2.0.21-22 | 8000 | HTTP | FastAPI |
| 10.2.0.10 | 10.2.0.40 | 8080 | HTTP | Keycloak |
| 10.2.0.21-22 | 10.2.0.31-32 | 7687 | Bolt | Neo4j |
| 10.2.0.21-22 | 10.2.0.40 | 8080 | HTTP | 認証 |
| 10.2.0.31 | 10.2.0.32 | 7687 | Bolt | レプリケーション |
| 10.2.0.50 | 10.2.0.0/24 | 9100 | HTTP | メトリクス収集 |

---

## セキュリティ設計

### セキュリティ層

```
Layer 1: ネットワークセキュリティ
├── ファイアウォール（L3/L4フィルタリング）
├── VLANセグメンテーション
└── 不正アクセス検知（IDS）

Layer 2: アプリケーションセキュリティ
├── WAF（nginx + ModSecurity）
├── TLS 1.3（通信暗号化）
├── CSP/XSS対策ヘッダー
└── レート制限

Layer 3: 認証・認可
├── OIDC認証（Keycloak）
├── 多要素認証（OTP）
├── RBAC（ロールベースアクセス制御）
└── セッション管理

Layer 4: データセキュリティ
├── 保存時暗号化（Neo4j Enterprise）
├── 監査ログ（全操作記録）
├── データマスキング
└── バックアップ暗号化
```

### 必須セキュリティ対策

| カテゴリ | 対策 | 実装 | 優先度 |
|---------|------|------|--------|
| 通信暗号化 | TLS 1.3 | nginx SSL終端 | 必須 |
| 認証 | OIDC + MFA | Keycloak | 必須 |
| 認可 | RBAC | Keycloak ロール | 必須 |
| 監査 | 全操作ログ | Neo4j + アプリログ | 必須 |
| 暗号化 | 保存時暗号化 | Neo4j Enterprise | 推奨 |
| WAF | 攻撃検知 | ModSecurity | 推奨 |
| IDS | 不正検知 | Suricata | 推奨 |

### 個人情報保護法対応チェックリスト

| 項目 | 対応内容 | 確認 |
|------|---------|------|
| 利用目的の特定 | システム利用規約に明記 | [ ] |
| 安全管理措置 | 本ドキュメントの対策実施 | [ ] |
| 従業者の監督 | 操作ログによる監視 | [ ] |
| アクセス権限管理 | RBACによる最小権限 | [ ] |
| 漏洩時対応手順 | インシデント対応手順書 | [ ] |
| 定期的な見直し | 年1回のセキュリティ監査 | [ ] |

---

## 可用性設計

### 可用性目標

| 構成パターン | 目標可用性 | 年間許容ダウンタイム |
|-------------|-----------|-------------------|
| パターンA（推奨） | 99.9% | 8.7時間 |
| パターンB（小規模） | 99% | 87時間 |
| パターンC（最小） | 95% | 438時間 |

### 冗長化設計

#### アプリケーション層

```
              ┌─────────────┐
              │   nginx     │
              │ (ロードバランサー) │
              └──────┬──────┘
                     │
         ┌───────────┴───────────┐
         ▼                       ▼
   ┌─────────────┐         ┌─────────────┐
   │  APサーバー1 │         │  APサーバー2 │
   │  (Active)   │         │  (Active)   │
   └─────────────┘         └─────────────┘

   負荷分散方式: ラウンドロビン
   ヘルスチェック: 30秒間隔
   障害検知: 3回失敗で切り離し
```

#### データベース層

```
   ┌─────────────────────┐
   │  Neo4j Primary      │
   │  (Read/Write)       │
   └──────────┬──────────┘
              │ 同期レプリケーション
              ▼
   ┌─────────────────────┐
   │  Neo4j Replica      │
   │  (Read Only)        │
   └─────────────────────┘

   フェイルオーバー: 手動（自動化推奨）
   レプリケーション遅延: < 1秒
```

### 障害対応手順

| 障害箇所 | 検知方法 | 復旧手順 | 目標復旧時間 |
|---------|---------|---------|-------------|
| APサーバー1台停止 | ヘルスチェック | 自動切り離し | 30秒 |
| APサーバー全停止 | アラート | サーバー再起動 | 15分 |
| DBプライマリ停止 | ヘルスチェック | レプリカ昇格 | 30分 |
| 認証サーバー停止 | アラート | サーバー再起動 | 15分 |
| ネットワーク障害 | 監視 | ネットワーク復旧 | 60分 |

---

## バックアップ設計

### バックアップ方針

```
┌─────────────────────────────────────────────────────────────────┐
│                      バックアップ戦略                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐   ┌─────────────┐   ┌─────────────┐          │
│  │  日次       │   │  週次       │   │  月次       │          │
│  │  フルバック  │   │  保管      │   │  長期保管   │          │
│  │  アップ     │   │  (4世代)   │   │  (12世代)  │          │
│  │  (7世代)   │   │            │   │            │          │
│  └─────────────┘   └─────────────┘   └─────────────┘          │
│         │                 │                 │                  │
│         ▼                 ▼                 ▼                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              バックアップサーバー (オンサイト)            │   │
│  │                    保管期間: 30日                        │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                  │
│                              │ 暗号化転送                       │
│                              ▼                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              オフサイトバックアップ                        │   │
│  │              (別拠点 / テープ)                            │   │
│  │              保管期間: 1年                                │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### バックアップスケジュール

| 種別 | 対象 | 頻度 | 保管期間 | 方式 |
|------|------|------|---------|------|
| Neo4j フルバックアップ | DB全体 | 日次 02:00 | 7世代 | neo4j-admin dump |
| Neo4j 差分バックアップ | トランザクションログ | 1時間毎 | 24時間 | ログローテーション |
| Keycloak DB | PostgreSQL | 日次 03:00 | 7世代 | pg_dump |
| 設定ファイル | 各サーバー設定 | 日次 04:00 | 30世代 | rsync |
| 監査ログ | 全操作ログ | リアルタイム | 7年 | ログ転送 |

### バックアップスクリプト

```bash
# /opt/backup/daily_backup.sh
#!/bin/bash

BACKUP_DIR="/backup/neo4j/$(date +%Y%m%d)"
RETENTION_DAYS=7

# Neo4j バックアップ
docker exec livelihood-neo4j neo4j-admin database dump \
  --to-path=/backup/dump_$(date +%Y%m%d).dump neo4j

# 古いバックアップの削除
find /backup -type d -mtime +${RETENTION_DAYS} -exec rm -rf {} \;

# オフサイト転送（暗号化）
gpg --encrypt --recipient backup@city.example.lg.jp \
  /backup/dump_$(date +%Y%m%d).dump

rsync -avz --progress /backup/*.gpg offsite-backup:/backup/
```

### リストア手順

```bash
# 1. サービス停止
docker compose -f docker-compose.prod.yml stop neo4j

# 2. データディレクトリのバックアップ
mv /var/lib/neo4j/data /var/lib/neo4j/data.old

# 3. バックアップからリストア
docker exec livelihood-neo4j neo4j-admin database load \
  --from-path=/backup/dump_YYYYMMDD.dump neo4j

# 4. サービス起動
docker compose -f docker-compose.prod.yml start neo4j

# 5. 動作確認
curl -u neo4j:password http://localhost:7474/db/neo4j/tx
```

---

## 監視設計

### 監視項目

#### システム監視

| 項目 | 閾値（警告） | 閾値（異常） | 通知先 |
|------|------------|------------|--------|
| CPU使用率 | > 70% | > 90% | 運用担当 |
| メモリ使用率 | > 80% | > 95% | 運用担当 |
| ディスク使用率 | > 70% | > 90% | 運用担当 |
| ネットワーク帯域 | > 70% | > 90% | 運用担当 |

#### アプリケーション監視

| 項目 | 閾値（警告） | 閾値（異常） | 通知先 |
|------|------------|------------|--------|
| レスポンスタイム | > 3秒 | > 10秒 | 運用担当 |
| エラー率 | > 1% | > 5% | 運用担当 |
| 同時接続数 | > 80% | > 95% | 運用担当 |
| ヘルスチェック失敗 | 1回 | 3回連続 | 運用担当 |

#### セキュリティ監視

| 項目 | 検知条件 | 通知先 |
|------|---------|--------|
| ログイン失敗 | 5回/分 | セキュリティ担当 |
| 不正アクセス試行 | WAF検知 | セキュリティ担当 |
| 権限昇格試行 | 監査ログ | セキュリティ担当 |
| 大量データアクセス | 100件/分 | セキュリティ担当 |

### Grafanaダッシュボード

```
┌─────────────────────────────────────────────────────────────────────┐
│                    生活保護支援システム 監視ダッシュボード             │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐ │
│  │  システム稼働状況 │  │  アクティブユーザー │  │  本日の登録数    │ │
│  │     ● 正常       │  │       23         │  │      47         │ │
│  └──────────────────┘  └──────────────────┘  └──────────────────┘ │
│                                                                     │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │                    レスポンスタイム推移                         │ │
│  │  200ms ─────────────────────────────────────────────         │ │
│  │  150ms ─────────────────────────────────────────────         │ │
│  │  100ms ─────────────────────────────────────────────         │ │
│  │   50ms ─────────────────────────────────────────────         │ │
│  │        09:00  10:00  11:00  12:00  13:00  14:00  15:00       │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  ┌─────────────────────────┐  ┌─────────────────────────────────┐ │
│  │      リソース使用状況     │  │        直近のアラート           │ │
│  │  CPU:    ████░░░░ 45%   │  │  ● 14:23 DB接続数増加          │ │
│  │  Memory: █████░░░ 62%   │  │  ● 13:45 レスポンス遅延         │ │
│  │  Disk:   ██░░░░░░ 28%   │  │                                 │ │
│  └─────────────────────────┘  └─────────────────────────────────┘ │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## コスト試算

### パターンA: 本番推奨構成

#### 初期費用

| 項目 | 数量 | 単価 | 金額 |
|------|------|------|------|
| APサーバー | 2台 | 50万円 | 100万円 |
| DBサーバー | 2台 | 80万円 | 160万円 |
| 認証サーバー | 1台 | 40万円 | 40万円 |
| 監視サーバー | 1台 | 30万円 | 30万円 |
| バックアップサーバー | 1台 | 40万円 | 40万円 |
| ネットワーク機器 | 一式 | 50万円 | 50万円 |
| 構築費用 | 一式 | 100万円 | 100万円 |
| **初期費用合計** | | | **520万円** |

#### 年間運用費

| 項目 | 金額 |
|------|------|
| Neo4j Enterprise ライセンス | 200万円 |
| 保守サポート | 100万円 |
| 電気代 | 20万円 |
| 運用人件費（0.3人月/月） | 120万円 |
| **年間運用費合計** | **440万円** |

### パターンB: 小規模構成

#### 初期費用

| 項目 | 数量 | 単価 | 金額 |
|------|------|------|------|
| 統合サーバー | 1台 | 80万円 | 80万円 |
| バックアップサーバー | 1台 | 40万円 | 40万円 |
| 構築費用 | 一式 | 50万円 | 50万円 |
| **初期費用合計** | | | **170万円** |

#### 年間運用費

| 項目 | 金額 |
|------|------|
| ソフトウェア（OSS） | 0円 |
| 保守サポート | 50万円 |
| 電気代 | 5万円 |
| 運用人件費（0.1人月/月） | 40万円 |
| **年間運用費合計** | **95万円** |

---

## 導入ロードマップ

### フェーズ1: パイロット導入（3ヶ月）

```
Month 1: 環境構築
├── サーバー調達・セットアップ
├── ネットワーク設定
├── Docker環境構築
└── 基本動作確認

Month 2: アプリケーション導入
├── Neo4j セットアップ
├── Keycloak 設定
├── Streamlit/FastAPI デプロイ
└── 初期データ投入

Month 3: 試験運用
├── 1〜2係でのテスト運用
├── ユーザートレーニング
├── フィードバック収集
└── 課題整理・改善
```

### フェーズ2: 本格導入（3ヶ月）

```
Month 4: 冗長化対応
├── DBレプリカ構築
├── APサーバー冗長化
├── ロードバランサー設定
└── フェイルオーバーテスト

Month 5: 全体展開
├── 全係への展開
├── ユーザー一括登録
├── 運用手順書整備
└── ヘルプデスク体制構築

Month 6: 安定化
├── 監視体制確立
├── バックアップ検証
├── パフォーマンスチューニング
└── セキュリティ監査
```

### フェーズ3: 安定運用（継続）

```
継続的な運用:
├── 日次: バックアップ確認
├── 週次: ログレビュー
├── 月次: パフォーマンスレビュー
├── 四半期: セキュリティパッチ適用
└── 年次: 全体監査・見直し
```

---

## 関連ドキュメント

- [SERVER_SETUP.md](./SERVER_SETUP.md) - サーバー構築手順書
- [DEPLOYMENT.md](./DEPLOYMENT.md) - デプロイ手順
- [KEYCLOAK_USER_MANAGEMENT.md](./KEYCLOAK_USER_MANAGEMENT.md) - ユーザー管理
- [TECHNICAL_STANDARDS.md](./TECHNICAL_STANDARDS.md) - 技術基準書
